{% extends 'base.html' %} {% load static %}

{% block content %}
<section class="home-landing-section">
    <div class="main-img-container">
        <div class="search-header">
            <h2>Discover your new home</h2>
            <form method="GET" action="{% url 'listings' %}" class="search-bar-container">
                <input type="text" class="banner-search" placeholder="Search e.g Crossmolina" name="q">
                <button type="submit" class="btn banner-search" value="">Search <i class="fas fa-search-location"></i></button>
            </form>
        </div>
    </div>
</section>
<section class="discover-section">
    <h2 class="text-muted">Discover</h2>
    <h3 class="text-center">Spotlight Listings</h3>
    <div class="card-container">
        {% for listing in result_list %}
        <a href="{% if listing.product.category.name == 'sale' %} {% url 'sale_listing_detail' listing.id %} {% elif listing.product.category.name == 'rent' %} {% url 'rent_listing_detail' listing.id %} {% endif %}">
        <div class="card h-100">
            <img src="{{ listing.header_image.url }}" class="card-img-top" alt="Photo of {{ listing }}">
            <div class="{% if listing.is_spotlight %} card-img-overlay-spotlight {% endif %} card-img-overlay">
                <span class="property-price">â‚¬ {{ listing.price }}</span>
                <span class="for-rent-sale">FOR {{ listing.category | upper }}</span>
            </div>
            <div class="card-body {% if listing.is_spotlight %} spotlight {% endif %}">
                <h5 class="card-title">Co. {{ listing.county }}</h5>
                <p class="card-text"><i class="fas fa-map-marker-alt"></i> {{ listing.area }}</p>
                <p class="card-text">{{ listing.no_of_bathrooms }} Bathrooms | {{ listing.no_of_bedrooms }} beds | {{ listing.floor_area }} SqM | BER rating: {{ listing.ber_rating }} </p>
                <hr class="card-hr"/>
                <p class="card-text">{% if listing.company_name %} {{ listing.company_name }} {% else %} {{ listing.full_name }} {% endif %}</p>
                {% if listing.is_spotlight %}
                    <span class="spotlight-tag">SPOTLIGHT</span>
                {% endif %}
            </div>
        </div>
        </a>
    {% endfor %}
    </div>
</section>
<div class="text-center">
    <p class="text-muted">
        Total live listings: {{ all_live_listings }}
    </p>
</div>
{% endblock %}